# 서버 인터페이스 메뉴얼

## Cheatsheet
Index|기능|서버 내부 주소|송신정보<br>(서버에 필요한 정보)|수신정보<br>(서버에서 보내는 정보)
:-:|-|-|-|-
1|아이템 추가|/save|이름(N), 내용|추가성공여부
2|아이템 삭제|/del|이름(N)|삭제성공여부
3|아이템 내용 변경|/save|이름(N), 내용|변경성공여부
4|특정 아이템의 이름 중복 조회|/check|이름(N)|중복여부
5|특정 아이템 가장 최근위치 조회|/locate|이름(A)|아이템의 이름, 마지막 위치값
6|특정 아이템 과거위치 조회|/locate|이름(A), 스택신호|아이템의 이름, 스택 위치값
7|특정 아이템 위치 변경|/savelocate|이름(N,A), 위치값(N), 스택신호|변경성공여부
8|특정 아이템 전체 내용 조회|/search|이름(N)|아이템의 모든 내용
9|특정조건의 모든 아이템 전체 내용 조회|/search|조건검색문|해당 아이템들의 모든 내용
10|아이템의 방향 기준치 설정|/locatem|방향값(N)|저장성공여부

N: 필수 입력, A: 부정확한 값 입력 허용

## 아이템 구성
모든 아이템은 이름을 **id(고유식별자)** 로 취급하여 관리됩니다. 생략불가입니다.
모든 아이템의 내용은 아래의 값들을 지칭합니다. 생략가능합니다.

- 위치 리스트

    - 위치값 : 총 4개의 값으로 이루어진 배열로 위치이름과 위치주소로 구성되며, 첫번째값이 위치이름을, 그 이후 값들은 위치주소인 지자기센서 3축의 각 값에 해당합니다. (위치이름과 위치주소 생략시, 각각 빈문자열)

- 현재 수량 (생략시, 총 재고량 값)

- 총 재고량 (생략시, 0)

- 설명

- 사진이름, 사진 (생략시, 빈버퍼)


## 상세설명
아래는 각 기능에 대한 상세설명입니다.

1.	**아이템 추가**

    데이터베이스에 새로운 아이템을 추가합니다. 이름은 반드시 입력되어야 합니다.

    입력된 이름이 이미 데이터베이스에 입력이 되었는지 확인하여 중복이 되었을 경우 진행동의를 확인합니다. 이에 동의한 경우 아이템 내용 변경으로 자동 실행합니다.

2.	**아이템 삭제**

    데이터베이스에서 아이템을 삭제합니다. 해당 아이템이 없을 경우 실행이 무시됩니다.

3.	**아이템 내용 변경**

    데이터베이스에 해당 이름의 아이템의 내용을 입력받은 내용으로 덮어쓰여지며,

    내용 중에 위치값은 위치 리스트의 가장 최근 위치로 추가됩니다.

4.	**특정 아이템의 이름 중복 조회**

    해당 이름값이 데이터베이스에 존재하는 아이템의 이름인지 확인합니다.

5.	**특정 아이템 가장 최근위치 조회**

    해당 이름값의 아이템의 가장 마지막에 입력된 위치값을 불러옵니다.

    이름값이 생략이 가능하며, 생략이 되었을 경우 서버내부의 아이템 탐색인자를 통해 자동으로 최근 조회한 아이템의 최근 위치값을 불러옵니다.

    해당 이름값의 아이템이 없을 경우, 이름값이 가장 많이 겹치는(50%이상 겹쳐야 합니다) 아이템이 해당 아이템이 됩니다.

6.	**특정 아이템 과거위치 조회**

    해당 이름값의 아이템의 스택신호에 해당하는 위치값을 불러옵니다.

    스택신호는 정수로, 0은 가장 최근 위치값을 불러오고, 값이 클수록 더욱 오래전에 입력된 위치값을 불러옵니다. 생략이 가능하며 생략이 되었을 경우 서버내부의 아이템 탐색인자를 통해 자동으로 최근 위치값(마지막으로 위치를 불러온 아이템의 불러온 횟수만큼의 스택신호에 해당하는 과거위치값)을 불러옵니다.

    스택신호가 생략이 되었을 경우 가장 최근 위치값을 불러옵니다.

    해당 이름값의 아이템이 없을 경우, 이름값이 가장 많이 겹치는(50%이상 겹쳐야 합니다) 아이템이 해당 아이템이 됩니다.

7.	**특정 아이템 위치 변경**

    해당 이름값의 아이템의 스택신호에 해당하는 위치값을 변경합니다.

    스택신호가 생략이 되었을 경우 가장 최근 위치값을 변경합니다.

    해당 이름값의 아이템이 없을 경우, 이름값이 가장 많이 겹치는(50%이상 겹쳐야 합니다) 아이템이 해당 아이템이 됩니다.

8.	**특정 아이템 전체 내용 조회**

    해당 이름값에 아이템의 모든 내용을 Query String의 형식으로 불러옵니다.

9.	**특정 조건의 모든 아이템 전체 내용 조회**

    조건검색문의 문자가 아이템의 이름이나 내용에 일부 일치하는 아이템들의 내용을 배열의 형식으로 불러옵니다. 각 아이템의 모든 내용은 Query String의 형식으로 이루어져 있습니다.

    조건검색문이 생략되었을 경우 모든 아이템을 불러옵니다.

10. **아이템의 방향 기준치 설정**

    모든 아이템의 방향기준치값을 해당 방향값으로 설정합니다.